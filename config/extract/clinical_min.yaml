# Clinical Extraction Configuration
# Minimum fields for evidence pack extraction
#
# File: config/extract/clinical_min.yaml
# Card: FI-DATA-RES-021
# Created: 2025-10-30
# Updated: 2025-11-17

version: "1.0"
description: "Minimum clinical fields for evidence pack extraction with citation support"

# Required fields for clinical evidence
required_fields:
  - consulta         # Clinical question being addressed
  - source_id        # Unique identifier for source document
  - tipo_doc         # Document type (cita_medica, lab_result, imaging, prescription)
  - fecha            # Document date (ISO-8601)
  - paciente_id      # Patient identifier (hashed for privacy)
  - hallazgo         # Clinical finding or observation

# Optional clinical fields
optional_fields:
  - severidad        # Severity level (leve, moderado, severo, crítico)
  - tratamiento      # Treatment prescribed
  - notas            # Additional clinical notes
  - citation_text    # Exact text from source for citation
  - page_number      # Page reference for citation
  - confidence       # Confidence score (0-1) for extraction

# Document types supported
document_types:
  cita_medica:
    description: "Medical consultation note"
    required: [fecha, paciente_id, hallazgo]

  lab_result:
    description: "Laboratory test result"
    required: [fecha, paciente_id, hallazgo]

  imaging:
    description: "Medical imaging report (X-ray, CT, MRI)"
    required: [fecha, paciente_id, hallazgo]

  prescription:
    description: "Medical prescription"
    required: [fecha, paciente_id, tratamiento]

# Severity levels
severity_levels:
  leve: 1
  moderado: 2
  severo: 3
  crítico: 4

# Extraction rules
extraction:
  # Minimum confidence threshold for auto-extraction
  min_confidence: 0.7

  # Maximum documents per evidence pack
  max_documents: 100

  # Hash algorithm for source_id
  hash_algorithm: "sha256"

  # Redaction policy
  redaction:
    enabled: true
    fields_to_redact: [paciente_id, notas]
    redaction_char: "*"

# Evidence Pack configuration
evidence_pack:
  # Output format for evidence packs
  format: "json"

  # Include SHA256 hashes for all source documents
  include_hashes: true

  # Citation style (numeric: [1], [2], etc.)
  citation_style: "numeric"

  # Template mode for Q&A (deterministic, no diagnosis)
  template_mode: "answer-with-citations-only"

  # Export path pattern
  export_path: "/export/evidence/{id}.json"

  # Policy snapshot inclusion
  include_policy_snapshot: true
