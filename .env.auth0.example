# ============================================================================
# Auth0 Configuration (HIPAA G-003)
# ============================================================================
# Copy this file to .env and fill in your Auth0 credentials

# Auth0 Domain (from Auth0 Dashboard → Applications → Settings)
# Note: Include region subdomain (e.g., .us.auth0.com for US region)
AUTH0_DOMAIN=dev-1r4daup7ofj7q6gn.us.auth0.com

# Auth0 Client ID (from Auth0 Dashboard → Applications → Settings)
AUTH0_CLIENT_ID=rYOowVCxSqeSNFVOFsZuVIiYsjw4wkKp

# Auth0 Client Secret (from Auth0 Dashboard → Applications → Settings)
# ⚠️ KEEP SECRET! Do not commit to git!
AUTH0_CLIENT_SECRET=your_client_secret_here

# Auth0 API Identifier (Audience)
# Create an API in Auth0 Dashboard → Applications → APIs
# Identifier: https://api.fi-aurity.duckdns.org
AUTH0_API_IDENTIFIER=https://api.fi-aurity.duckdns.org

# Frontend URLs (for CORS and Auth0 callbacks)
FRONTEND_URL_PROD=https://fi-aurity.duckdns.org
FRONTEND_URL_DEV=http://localhost:9000

# ============================================================================
# Auth0 Setup Instructions
# ============================================================================

# 1. Create API in Auth0 Dashboard
#    - Go to: Applications → APIs → Create API
#    - Name: AURITY Medical AI API
#    - Identifier: https://api.fi-aurity.duckdns.org
#    - Signing Algorithm: RS256

# 2. Configure Application (AURITY Medical AI)
#    - Allowed Callback URLs:
#      https://fi-aurity.duckdns.org/callback
#      http://localhost:9000/callback
#
#    - Allowed Logout URLs:
#      https://fi-aurity.duckdns.org
#      http://localhost:9000
#
#    - Allowed Web Origins:
#      https://fi-aurity.duckdns.org
#      http://localhost:9000
#
#    - JWT Signature Algorithm: RS256

# 3. Create Custom Roles (for RBAC)
#    - Go to: User Management → Roles → Create Role
#    - Create roles: MEDICO, ENFERMERA, ADMIN
#    - Assign permissions to each role

# 4. Add Custom Claims (for roles in JWT token)
#    - Go to: Auth Pipeline → Rules → Create Rule
#    - Template: Empty Rule
#    - Name: Add roles to access token
#    - Script:
#
#    function addRolesToToken(user, context, callback) {
#      const namespace = 'https://aurity.app/';
#      const assignedRoles = (context.authorization || {}).roles || [];
#
#      const idTokenClaims = context.idToken || {};
#      const accessTokenClaims = context.accessToken || {};
#
#      idTokenClaims[`${namespace}roles`] = assignedRoles;
#      accessTokenClaims[`${namespace}roles`] = assignedRoles;
#
#      context.idToken = idTokenClaims;
#      context.accessToken = accessTokenClaims;
#
#      callback(null, user, context);
#    }

# 5. Assign Roles to Users
#    - Go to: User Management → Users → Select User
#    - Roles → Assign Roles → Select MEDICO/ENFERMERA/ADMIN

# 6. Test Authentication
#    - Start backend: make run
#    - Test health: curl http://localhost:7001/api/auth/health
#    - Test config: curl http://localhost:7001/api/auth/config
