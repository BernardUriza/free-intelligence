============================= test session starts ==============================
platform darwin -- Python 3.9.6, pytest-8.4.2, pluggy-1.6.0 -- /Library/Developer/CommandLineTools/usr/bin/python3
cachedir: .pytest_cache
rootdir: /Users/bernardurizaorozco/Documents/free-intelligence
configfile: pyproject.toml
plugins: anyio-4.11.0
collecting ... collected 30 items

tests/test_policy_enforcement.py::TestSovereigntyPolicy::test_egress_deny_blocks_external_url PASSED [  3%]
tests/test_policy_enforcement.py::TestSovereigntyPolicy::test_egress_deny_with_run_id PASSED [  6%]
tests/test_policy_enforcement.py::TestSovereigntyPolicy::test_egress_convenience_function PASSED [ 10%]
tests/test_policy_enforcement.py::TestPrivacyPolicy::test_phi_detection_mrn PASSED [ 13%]
tests/test_policy_enforcement.py::TestPrivacyPolicy::test_phi_detection_disabled_by_policy PASSED [ 16%]
tests/test_policy_enforcement.py::TestPrivacyPolicy::test_redact_email PASSED [ 20%]
tests/test_policy_enforcement.py::TestPrivacyPolicy::test_redact_phone PASSED [ 23%]
tests/test_policy_enforcement.py::TestPrivacyPolicy::test_redact_curp PASSED [ 26%]
tests/test_policy_enforcement.py::TestPrivacyPolicy::test_redact_rfc PASSED [ 30%]
tests/test_policy_enforcement.py::TestPrivacyPolicy::test_redact_ssn PASSED [ 33%]
tests/test_policy_enforcement.py::TestPrivacyPolicy::test_redact_stop_terms PASSED [ 36%]
tests/test_policy_enforcement.py::TestPrivacyPolicy::test_redact_preserves_non_sensitive_text PASSED [ 40%]
tests/test_policy_enforcement.py::TestPrivacyPolicy::test_redact_multiple_patterns PASSED [ 43%]
tests/test_policy_enforcement.py::TestPrivacyPolicy::test_redact_empty_string PASSED [ 46%]
tests/test_policy_enforcement.py::TestPrivacyPolicy::test_redact_none PASSED [ 50%]
tests/test_policy_enforcement.py::TestCostPolicy::test_cost_within_budget PASSED [ 53%]
tests/test_policy_enforcement.py::TestCostPolicy::test_cost_exceeds_budget PASSED [ 56%]
tests/test_policy_enforcement.py::TestCostPolicy::test_cost_exactly_at_budget PASSED [ 60%]
tests/test_policy_enforcement.py::TestCostPolicy::test_cost_with_run_id PASSED [ 63%]
tests/test_policy_enforcement.py::TestCostPolicy::test_cost_convenience_function PASSED [ 66%]
tests/test_policy_enforcement.py::TestFeatureFlags::test_timeline_auto_disabled_by_policy PASSED [ 70%]
tests/test_policy_enforcement.py::TestFeatureFlags::test_agents_disabled_by_policy PASSED [ 73%]
tests/test_policy_enforcement.py::TestFeatureFlags::test_timeline_auto_convenience_function PASSED [ 76%]
tests/test_policy_enforcement.py::TestFeatureFlags::test_agents_enabled_convenience_function PASSED [ 80%]
tests/test_policy_enforcement.py::TestPolicyUtilities::test_get_policy_simple_key PASSED [ 83%]
tests/test_policy_enforcement.py::TestPolicyUtilities::test_get_policy_nested_key PASSED [ 86%]
tests/test_policy_enforcement.py::TestPolicyUtilities::test_get_policy_deep_nested_key PASSED [ 90%]
tests/test_policy_enforcement.py::TestPolicyUtilities::test_get_policy_missing_key_returns_default PASSED [ 93%]
tests/test_policy_enforcement.py::TestPolicyUtilities::test_get_policy_digest PASSED [ 96%]
tests/test_policy_enforcement.py::TestPolicyUtilities::test_log_violation PASSED [100%]

============================== 30 passed in 0.34s ==============================
