# Free Intelligence â€” Pre-commit hooks
# Enforces NO_MD policy and other quality gates

repos:
  # Python code quality
  - repo: https://github.com/psf/black
    rev: 24.1.1
    hooks:
      - id: black
        language_version: python3

  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.1.15
    hooks:
      - id: ruff
        args: [--fix, --exit-non-zero-on-fix]

  - repo: https://github.com/pycqa/isort
    rev: 5.13.2
    hooks:
      - id: isort
        name: isort (python)

  # Custom local hooks
  - repo: local
    hooks:
      - id: reject-large-md
        name: Reject large markdown files (>150 lines)
        entry: .git-hooks/reject_large_md.py
        language: system
        types: [markdown]
        verbose: true

      - id: yaml-syntax-check
        name: Validate YAML syntax
        entry: python3 -c "import yaml; import sys; [yaml.safe_load(open(f)) for f in sys.argv[1:] if f.endswith(('.yaml', '.yml'))]"
        language: system
        types: [yaml]

      - id: json-syntax-check
        name: Validate JSON syntax
        entry: python3 -c "import json; import sys; [json.load(open(f)) for f in sys.argv[1:] if f.endswith('.json')]"
        language: system
        types: [json]
